name: Release Zig for PPA

on:
  workflow_dispatch:
    inputs:
      upload:
        description: 'Upload to PPA (default: true)'
        required: false
        default: true
        type: boolean

jobs:
  build-zig:
    name: Build Zig for PPA
    uses: ./.github/workflows/ppa-build-zig.yml
    secrets:
      PPA_GPG_PRIVATE_KEY: ${{ secrets.PPA_GPG_PRIVATE_KEY }}
      PPA_GPG_PASSPHRASE: ${{ secrets.PPA_GPG_PASSPHRASE }}
    with:
      upload: ${{ inputs.upload }}
      build_matrix: |
        {
          "builds": [
            {"codename": "noble", "container-image": "ubuntu:24.04"},
            {"codename": "plucky", "container-image": "ubuntu:25.04"},
            {"codename": "questing", "container-image": "ubuntu:25.10"}
          ]
        }
