#!/usr/bin/make -f

export DEB_BUILD_MAINT_OPTIONS = hardening=+all
GHOSTTY_VERSION ?= $(shell dpkg-parsechangelog -S version)

%:
	dh $@

override_dh_auto_build:
	zig0.15 build \
		--summary all \
		--prefix /usr \
		--system vendor-zig-cache/p \
		--global-cache-dir zig-cache \
		-Doptimize=ReleaseFast \
		-Dcpu=baseline \
		-Dpie=true \
		-Demit-docs \
		-Dversion-string=$(GHOSTTY_VERSION)

override_dh_auto_install:
	dh_auto_install
